<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-nginx服务器" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/07/04/nginx%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="article-date">
  <time class="dt-published" datetime="2022-07-04T07:18:57.000Z" itemprop="datePublished">2022-07-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/07/04/nginx%E6%9C%8D%E5%8A%A1%E5%99%A8/">nginx服务器</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>nginx服务器可以实现反向代理，并且高性能，在实际开发中较常使用。</p>
<p><strong>使用流程</strong></p>
<p>在nginx服务器的目录下（不能有中文），打开终端，并输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\nginx.exe -c.\conf\自己定义的配置文件，如果没有就是默认的.conf</span><br></pre></td></tr></table></figure>

<p>在配置文件中添加反向代理解决跨域问题</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">loaction /ajax/ &#123;</span><br><span class="line"> proxy-pass https://m.maoyan.com;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>重启服务器，重新加载一遍配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\nginx.exe -s reload</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/07/04/nginx%E6%9C%8D%E5%8A%A1%E5%99%A8/" data-id="cl56qh3gp0002pkfo342dbm5i" data-title="nginx服务器" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-git" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/07/04/git/" class="article-date">
  <time class="dt-published" datetime="2022-07-04T06:08:39.000Z" itemprop="datePublished">2022-07-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/07/04/git/">git</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>git代码管理工具</p>
<p>git基本使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git push 架构师先写好路由然后push到远程仓库</span><br><span class="line">git clone 普通程序员从github上把代码克隆下来</span><br><span class="line">git pull 拉取merge代码</span><br><span class="line">git add 添加暂存区</span><br><span class="line">git commit -m&#x27;zhu shi&#x27; 提交到本地仓库并加上注释</span><br><span class="line">git push origin master 往远程仓库推送代码</span><br></pre></td></tr></table></figure>

<p>code</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .暂存区</span><br><span class="line">git commit -m&#x27;zhu shi&#x27; 本地仓库</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>

<p>从暂存区撤回</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset head</span><br></pre></td></tr></table></figure>

<p>查看提交记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br></pre></td></tr></table></figure>



<p>创建完一个远程仓库以后，可以添加一个远程的域，然后就可以git push origin master</p>
<p>两个人一起提交的时候，后提交的人会因为本地的文件版本比远程文件低而报错，方法是使用git pull origin master 来拉取一下然后再提交。</p>
<p>子分支</p>
<p>创建一个子分支</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b eosqaq</span><br></pre></td></tr></table></figure>

<p>查看所有分支</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -a</span><br></pre></td></tr></table></figure>

<p>检查分支代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout 分支名字</span><br></pre></td></tr></table></figure>

<p>将分支代码合并到主分支中，之后子分支就没了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge 分支名字</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/07/04/git/" data-id="cl56qh3gn0001pkfo19bwfd4j" data-title="git" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-项目复盘" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/07/02/%E9%A1%B9%E7%9B%AE%E5%A4%8D%E7%9B%98/" class="article-date">
  <time class="dt-published" datetime="2022-07-02T12:37:49.000Z" itemprop="datePublished">2022-07-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/07/02/%E9%A1%B9%E7%9B%AE%E5%A4%8D%E7%9B%98/">项目复盘</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>项目复盘</p>
<p>在这一周左右的时间中主要是写了一个仿卖座的项目。</p>
<h4 id="静态资源文件夹"><a href="#静态资源文件夹" class="headerlink" title="静态资源文件夹"></a>静态资源文件夹</h4><p>public文件夹中主要存放的是静态资源文件，比如iconfont组件库，jpg图像等，和index.html，也就是项目的骨架。</p>
<p>在index.js中，可以通过这个meta标签让安卓机的浏览器没有300ms的按键延迟。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>如果想要彻底消除300ms延迟，可以在App.vue中设置CSS</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/* 通过CSS取消双击缩放功能 */</span><br><span class="line">* &#123;</span><br><span class="line">  touch-action: manipulation;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="components文件夹"><a href="#components文件夹" class="headerlink" title="components文件夹"></a>components文件夹</h4><p>components文件夹主要存放的是所有页面都共用的组件，在这个项目中是Tabbar组件</p>
<p>在tabbar中使用声明式跳转来写路由跳转</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  &lt;router-link to=&quot;/film&quot; tag=&quot;li&quot; active-class=&quot;kerwinactive&quot;&gt;</span><br><span class="line">    &lt;i class=&quot;iconfont icon-training&quot;&gt;&lt;/i&gt;</span><br><span class="line">    &lt;span&gt;电影&lt;/span&gt;</span><br><span class="line">  &lt;/router-link&gt;</span><br><span class="line">  &lt;router-link to=&quot;/cinema&quot; tag=&quot;li&quot; active-class=&quot;kerwinactive&quot;&gt;</span><br><span class="line">    &lt;i class=&quot;iconfont icon-all&quot;&gt;&lt;/i&gt;</span><br><span class="line">    &lt;span&gt;影院&lt;/span&gt;</span><br><span class="line">  &lt;/router-link&gt;</span><br><span class="line">  &lt;router-link to=&quot;/center&quot; tag=&quot;li&quot; active-class=&quot;kerwinactive&quot;&gt;</span><br><span class="line">    &lt;i class=&quot;iconfont icon-account&quot;&gt;&lt;/i&gt;</span><br><span class="line">    &lt;span&gt;我的&lt;/span&gt;</span><br><span class="line">  &lt;/router-link&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>

<h4 id="路由文件"><a href="#路由文件" class="headerlink" title="路由文件"></a>路由文件</h4><p>路由文件中的index.js中，首先要引入Vue，VueRouter组件，然后注册模块，这样就全局注册了router-view，并初始化。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Vue.use(VueRouter) // 注册模块, 已经全局组件 router-view</span><br><span class="line">const router = new VueRouter(&#123;</span><br><span class="line">  mode: &#x27;hash&#x27;, // hash ,history</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>注意：在定义路由路径routes的时候，通过使用箭头函数做到组件的按需加载，从而解决了一个SPA项目的痛点，首次加载时间过长</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  path: &#x27;/login&#x27;,</span><br><span class="line">  component: () =&gt; import(/* webpackChunkName: &quot;kerwingroup&quot; */ &#x27;../views/Login.vue&#x27;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>全局路由守卫的定义，验证localstorage中是否有token，有的话就next()，没有就跳转login</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">router.beforeEach((to, from, next) =&gt; &#123;</span><br><span class="line">  // ...</span><br><span class="line">  const auth = [&#x27;/center&#x27;, &#x27;/order&#x27;, &#x27;/money&#x27;, &#x27;/card&#x27;]</span><br><span class="line"></span><br><span class="line">  if (auth.includes(to.fullPath)) &#123;</span><br><span class="line">    // console.log(&#x27;验证token&#x27;)</span><br><span class="line">    if (!localStorage.getItem(&#x27;token&#x27;)) &#123;</span><br><span class="line">      next(&#x27;/login&#x27;)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      next()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    next()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="store文件夹"><a href="#store文件夹" class="headerlink" title="store文件夹"></a>store文件夹</h4><p>store文件夹主要是配合Vuex使用的。Vuex可以全局管理整个项目的所有状态，但是管理所有的项目中的状态成本过高，所以一般用来管理多个组件所共用的资源。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import Vuex from &#x27;vuex&#x27;</span><br><span class="line">import CityModule from &#x27;./module/CityModule&#x27;</span><br><span class="line">import CinemaModule from &#x27;./module/CinemaModule&#x27;</span><br><span class="line">import TabbarModule from &#x27;./module/TabbarModule&#x27;</span><br><span class="line">import createPersistedState from &#x27;vuex-persistedstate&#x27;</span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line">// store &quot;全局&quot;</span><br><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">  //Vuex持久化，没操作Vuex的时候都会把数据存到LocalStorage中，会永久存储</span><br><span class="line">  // 持久化不是Vuex本身的诉求，所以需要使用第三方库来实现</span><br><span class="line">  plugins: [createPersistedState()],</span><br><span class="line"></span><br><span class="line">  // 公共状态</span><br><span class="line">  // 公共状态被修改也不会被记录</span><br><span class="line">  state: &#123;&#125;,</span><br><span class="line">  // 集中式修改状态-被监控了</span><br><span class="line">  // 唯一修改状态的东西</span><br><span class="line">  mutations: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">  // 异步</span><br><span class="line">  actions: &#123;&#125;,</span><br><span class="line">  // 各个模块-火车组装</span><br><span class="line">  modules: &#123;</span><br><span class="line">    CityModule,</span><br><span class="line">    CinemaModule,</span><br><span class="line">    TabbarModule</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>各个模块-火车组装：每个组件所对应的状态使用modules来封装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">import http from &#x27;@/util/http&#x27;</span><br><span class="line">// 严格遵循Vuex流程，action=&gt;mutation=&gt;改变状态</span><br><span class="line">const module = &#123;</span><br><span class="line">  namespaced: true, // 命名空间</span><br><span class="line">  state: &#123;</span><br><span class="line">    cinemaList: []</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  mutations: &#123;</span><br><span class="line">    setCinemaList(state, cinemaList) &#123;</span><br><span class="line">      state.cinemaList = cinemaList</span><br><span class="line">    &#125;,</span><br><span class="line">    clearCinemaList(state) &#123;</span><br><span class="line">      state.cinemaList = []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">// 异步请求回来的数据缓存在vuex中，成为后端数据的状态快照</span><br><span class="line">  actions: &#123;</span><br><span class="line">    getCinemaList(store, cityId) &#123;</span><br><span class="line">      return http(&#123;</span><br><span class="line">        url: `/gateway?cityId=$&#123;cityId&#125;&amp;ticketFlag=1&amp;k=2500238`,</span><br><span class="line">        headers: &#123;</span><br><span class="line">          &#x27;X-Host&#x27;: &#x27;mall.film-ticket.cinema.list&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;).then(res =&gt; &#123;</span><br><span class="line">        // console.log(res.data)</span><br><span class="line">        store.commit(&#x27;setCinemaList&#x27;, res.data.data.cinemas)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default module</span><br></pre></td></tr></table></figure>

<h4 id="util文件夹"><a href="#util文件夹" class="headerlink" title="util文件夹"></a>util文件夹</h4><p>util文件夹一般用来封装项目的api，在这个项目中二次封装了axios组件库，初始化了一个自己的axios实例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const http = axios.create(&#123;</span><br><span class="line">  // axios给了我们create函数可以自己构建一个axios实例，同时自己设置一些配置</span><br><span class="line">  baseURL: &#x27;https://m.maizuo.com&#x27;,</span><br><span class="line">  // 超时的时间</span><br><span class="line">  timeout: 10000,</span><br><span class="line">  headers: &#123;</span><br><span class="line">    &#x27;X-Client-Info&#x27;:</span><br><span class="line">      &#x27;&#123;&quot;a&quot;:&quot;3000&quot;,&quot;ch&quot;:&quot;1002&quot;,&quot;v&quot;:&quot;5.0.4&quot;,&quot;e&quot;:&quot;1596502176387264316178433&quot;,&quot;bc&quot;:&quot;340800&quot;&#125;&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>通过使用axios拦截器和vant中的Toast来实现页面加载时的转圈圈功能。</p>
<p><em>http.interceptors.request()</em></p>
<p>在加载axios请求之前</p>
<p><em>http.interceptors.response()</em></p>
<p>在请求的数据请求回来以后</p>
<h4 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h4><p>引入组件库的时候要看清楚文档，比如引入swiper组件的时候要引入两个文件.js和.css</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import Swiper from &#x27;swiper/bundle&#x27; // 引入swiper.js</span><br><span class="line">import &#x27;swiper/swiper-bundle.min.css&#x27; // 引入swiper.css</span><br></pre></td></tr></table></figure>

<p>要避免出现swiper初始化过早的问题，在请求到数据的时候isShow才能显示为true</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;film-swiper v-if=&quot;isShow&quot;&gt;&lt;/film-swiper&gt;</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mounted() &#123;</span><br><span class="line">  http(&#123;</span><br><span class="line">    url: &#x27;/gateway?cityId=340800&amp;pageNum=1&amp;pageSize=10&amp;type=1&amp;k=136082&#x27;,</span><br><span class="line">    headers: &#123;</span><br><span class="line">      &#x27;X-Host&#x27;: &#x27;mall.film-ticket.film.list&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    // method:&quot;get&quot;</span><br><span class="line">  &#125;).then(res =&gt; &#123;</span><br><span class="line">    console.log(res.data.data.films)</span><br><span class="line"></span><br><span class="line">    this.datalist = res.data.data.films</span><br><span class="line">    this.isShow = true</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用Vuex的时候的流程</p>
<p>要使用state，通过引入mapstate方法，在computed中得到state</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import &#123; mapState &#125; from &#x27;vuex&#x27;</span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapState(&#x27;CityModule&#x27;, [&#x27;cityId&#x27;])</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<p>懒加载</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">onLoad() &#123;</span><br><span class="line">  // 滚动条的问题导致的bug，如果页面销毁了重新加载的时候datalist.length就是0，所以直接就finished了，所以要增加一个非零的判断</span><br><span class="line">  if (this.datalist.length === this.total &amp;&amp; this.datalist.length !== 0) &#123;</span><br><span class="line">    this.finished = true</span><br><span class="line">    return</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  console.log(&#x27;到底了&#x27;)</span><br><span class="line">  // 1. ajax请求新页面的数据，</span><br><span class="line">  // 2. 合并新数据到老数据</span><br><span class="line">  // 3. this.loading=false</span><br><span class="line"></span><br><span class="line">  this.current++</span><br><span class="line">  http(&#123;</span><br><span class="line">    url: `/gateway?cityId=$&#123;this.cityId&#125;&amp;pageNum=$&#123;this.current&#125;&amp;pageSize=10&amp;type=1&amp;k=136082`,</span><br><span class="line">    headers: &#123;</span><br><span class="line">      &#x27;X-Host&#x27;: &#x27;mall.film-ticket.film.list&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    // method:&quot;get&quot;</span><br><span class="line">  &#125;).then(res =&gt; &#123;</span><br><span class="line">    // console.log(res.data.data.films)</span><br><span class="line">    this.datalist = [...this.datalist, ...res.data.data.films]</span><br><span class="line"></span><br><span class="line">    this.loading = false</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>模糊搜索的逻辑</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computedCinemaList () &#123;</span><br><span class="line">  if (this.value === &#x27;&#x27;) return []</span><br><span class="line">  //全部转换成大写从而做到搜索时的大小写忽略</span><br><span class="line">  return this.cinemaList.filter(item =&gt; item.name.toUpperCase().includes(this.value.toUpperCase()) || item.address.toUpperCase().includes(this.value.toUpperCase()))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/07/02/%E9%A1%B9%E7%9B%AE%E5%A4%8D%E7%9B%98/" data-id="cl56qh3gt0008pkfo5wxmavcg" data-title="项目复盘" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Vuex" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/07/02/Vuex/" class="article-date">
  <time class="dt-published" datetime="2022-07-02T06:07:23.000Z" itemprop="datePublished">2022-07-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/07/02/Vuex/">Vuex</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Vuex</p>
<p>Vuex是一个专门为Vue.js应用程序开发的状态管理模式，采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式变化。一般使用Vuex来管理共享状态，虽然Vuex可以做到管理整个应用的所有的状态，但是这样做的话成本过高。可以承担非父子通信的问题。</p>
<ol>
<li>应用层级的状态应该集中在单个store对象上</li>
<li>提交mutation是更改状态的唯一方法，并且这个过程是同步的</li>
<li>异步逻辑都应该封装到action中</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/07/02/Vuex/" data-id="cl56qh3gk0000pkfo7tvu2hne" data-title="Vuex" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-轮播组件" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/06/26/%E8%BD%AE%E6%92%AD%E7%BB%84%E4%BB%B6/" class="article-date">
  <time class="dt-published" datetime="2022-06-26T12:29:18.000Z" itemprop="datePublished">2022-06-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/06/26/%E8%BD%AE%E6%92%AD%E7%BB%84%E4%BB%B6/">轮播组件</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>轮播组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;swiper-container&quot;&gt;</span><br><span class="line">&lt;div class=&quot;swiper-wrapper&quot;&gt;</span><br><span class="line">&lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;swiper-pagination&quot;&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>&#x2F;&#x2F;按需加载，或者直接加载bundle，类似于全局引入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import Swiper from &#x27;swiper/bundle&#x27;</span><br><span class="line">import &#x27;swiper/swiper-bundle.min.css&#x27;//引入css</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mounted()&#123;</span><br><span class="line">new Swiper(&#x27;.swiper-container&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/06/26/%E8%BD%AE%E6%92%AD%E7%BB%84%E4%BB%B6/" data-id="cl56qh3gs0006pkfo9kbp69lr" data-title="轮播组件" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-项目准备" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/06/26/%E9%A1%B9%E7%9B%AE%E5%87%86%E5%A4%87/" class="article-date">
  <time class="dt-published" datetime="2022-06-26T10:46:22.000Z" itemprop="datePublished">2022-06-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/06/26/%E9%A1%B9%E7%9B%AE%E5%87%86%E5%A4%87/">项目准备</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>项目准备</p>
<p><strong>反向代理配置</strong></p>
<ol>
<li>后端配置好了cors，可以直接用，不存在跨域问题</li>
<li>反向代理：把url的域名删除然后请求自己的服务器，然后由服务器把请求传递出去，通过vue.config.js proxy来配置反向代理。</li>
</ol>
<p>vue.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">module.exports=&#123;</span><br><span class="line">devServer:&#123;</span><br><span class="line">proxy:&#123;</span><br><span class="line">&quot;ajax&quot;:&#123;</span><br><span class="line">target:&#x27;https://m.maoyan.com&#x27;,</span><br><span class="line">changeOrigin:true</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>配置header</strong></p>
<p>这样每次请求想要拿到数据就必须加一个请求头，而不知道请求头的话就不能拿到数据，增加了安全性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">axios(&#123;</span><br><span class="line">url:&#x27;&#x27;,</span><br><span class="line">headers:&#123;&#125;</span><br><span class="line">&#125;).then(res=&gt;&#123;</span><br><span class="line">console.log(res)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/06/26/%E9%A1%B9%E7%9B%AE%E5%87%86%E5%A4%87/" data-id="cl56qh3gs0007pkfo8ridfsp8" data-title="项目准备" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-路由懒加载" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/06/26/%E8%B7%AF%E7%94%B1%E6%87%92%E5%8A%A0%E8%BD%BD/" class="article-date">
  <time class="dt-published" datetime="2022-06-26T08:36:24.000Z" itemprop="datePublished">2022-06-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/06/26/%E8%B7%AF%E7%94%B1%E6%87%92%E5%8A%A0%E8%BD%BD/">路由懒加载</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>路由懒加载</p>
<p>当打包构建应用的时候，js包会变得非常大，影响页面加载，如果我们能把不同路由对应的组件分割成不同的代码块，然后当路由被访问的时候才加载对应组件，那么就会更加高效。</p>
<p>避免首屏加载过慢。</p>
<p>index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">path:&#x27;/login&#x27;,</span><br><span class="line">component:()=&gt;import(&#x27;../views/Login.vue&#x27;)//只有在路由指向login的时候再去引入login的组件</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>代码分组</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">path:&#x27;/login&#x27;,</span><br><span class="line">component:()=&gt;import(/*webpackChunkName:&quot;eosqaqgroup&quot;*/&#x27;../views/Login.vue&#x27;)</span><br><span class="line">&#125;，</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/center&#x27;,</span><br><span class="line">component:()=&gt;import(/*webpackChunkName:&quot;eosqaqgroup&quot;*/&#x27;../views/center.vue&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样这两个组件都被分到了eosqaqgroup这个组别之下。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/06/26/%E8%B7%AF%E7%94%B1%E6%87%92%E5%8A%A0%E8%BD%BD/" data-id="cl56qh3gq0003pkfo023l333q" data-title="路由懒加载" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-路由拦截" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/06/26/%E8%B7%AF%E7%94%B1%E6%8B%A6%E6%88%AA/" class="article-date">
  <time class="dt-published" datetime="2022-06-26T08:19:25.000Z" itemprop="datePublished">2022-06-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/06/26/%E8%B7%AF%E7%94%B1%E6%8B%A6%E6%88%AA/">路由拦截</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>路由拦截</p>
<p><strong>使用原生js来写</strong>，但是要在不同的地方写很多遍</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mounted()&#123;</span><br><span class="line">if(!localStorage.getItem(&#x27;token&#x27;))&#123;</span><br><span class="line">this.$router.push(&#x27;/login&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>导航守卫</strong></p>
<p>全局前置守卫</p>
<p>项目中又很多组件都涉及路由拦截，可以使用全局守卫。</p>
<p>index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">router.beforeEach((to,from,next)=&gt;&#123;</span><br><span class="line">let auth = [&#x27;/film&#x27;,&#x27;/center&#x27;,&#x27;/money&#x27;]</span><br><span class="line">if(auth.includes(to.fullPath))&#123;</span><br><span class="line">//console.log(&#x27;验证token&#x27;)</span><br><span class="line">if(!localStorage.getItem(&#x27;token&#x27;))&#123;</span><br><span class="line">next(&#x27;/login&#x27;)</span><br><span class="line">&#125;else&#123;</span><br><span class="line">next()</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">else&#123;</span><br><span class="line">next()//放行</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>局部守卫</p>
<p>center.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">beforeRouteEnter(to,from,next)&#123;</span><br><span class="line">if(!localStorage.getItem(&#x27;token&#x27;))&#123;</span><br><span class="line">next(&#x27;/login&#x27;)</span><br><span class="line">&#125;else&#123;</span><br><span class="line">next()</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/06/26/%E8%B7%AF%E7%94%B1%E6%8B%A6%E6%88%AA/" data-id="cl56qh3gr0005pkfo0snl3hne" data-title="路由拦截" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-路由模式" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/06/26/%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%BC%8F/" class="article-date">
  <time class="dt-published" datetime="2022-06-26T08:10:31.000Z" itemprop="datePublished">2022-06-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/06/26/%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%BC%8F/">路由模式</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><strong>路由模式</strong></p>
<p>vue支持两种模式</p>
<p>hash模式 #&#x2F;home </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">location.hash 切换、</span><br><span class="line">window.onhashchange 监听路径改变</span><br></pre></td></tr></table></figure>

<p>history模式 &#x2F;home</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">history.pushState 切换</span><br><span class="line">window.onpopstate 监听路径切换</span><br></pre></td></tr></table></figure>

<p>默认情况下是hash模式</p>
<p>index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const router = new VueRouter(&#123;</span><br><span class="line">mode:&#x27;history&#x27;,//hash,history</span><br><span class="line">routes</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>但是history模式需要后台配置支持，应为我们的应用是一个单页面客户端应用，如果后台没有正确的配置，那么当用户在浏览器访问<a target="_blank" rel="noopener" href="http://oursite.com/user/id%E7%9A%84%E6%97%B6%E5%80%99%E5%B0%B1%E4%BC%9A%E8%BF%94%E5%9B%9E404%E3%80%82">http://oursite.com/user/id的时候就会返回404。</a></p>
<p>如果路径匹配不到资源，要返回一个index页面。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/06/26/%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%BC%8F/" data-id="cl56qh3gr0004pkfoakfre0ih" data-title="路由模式" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-vue-router" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/06/25/vue-router/" class="article-date">
  <time class="dt-published" datetime="2022-06-25T12:46:40.000Z" itemprop="datePublished">2022-06-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/06/25/vue-router/">vue-router</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>vue-router</p>
<p><strong>一级路由配置</strong></p>
<p>main.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import router from &#x27;./router&#x27;</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">router,</span><br><span class="line">render:h=&gt;h(App)</span><br><span class="line">&#125;).$mount(&#x27;#app&#x27;)</span><br></pre></td></tr></table></figure>

<p>.&#x2F;router&#x2F;index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;Vue&#x27;</span><br><span class="line">import VueRouter from &#x27;vue-router&#x27;</span><br><span class="line">import Film from &#x27;../views/Film.vue&#x27;</span><br><span class="line">import Center from &#x27;../views/Center.vue&#x27;</span><br><span class="line">Vue.use(VueRouter)//注册模块,已经可以使用全局组件router-view</span><br><span class="line">const routes=[</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/film&#x27;,</span><br><span class="line">component:Film</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/center&#x27;,</span><br><span class="line">component:Center</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">const router = new VueRouter(&#123;</span><br><span class="line">routes</span><br><span class="line">&#125;)</span><br><span class="line">export default router</span><br></pre></td></tr></table></figure>

<p>App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//路由容器</span><br><span class="line">&lt;router-view&gt;&lt;/router-view&gt;</span><br></pre></td></tr></table></figure>



<p><strong>声明式导航</strong></p>
<p>相对于a链接，声明式导航可以做到每一次选中都是高亮显示，或者改变路径（loaction.hash）的时候就高亮。</p>
<p>如果自己写的话要监听路径。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;film&quot; tag=&quot;li&quot;&gt;电影&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<p>高亮</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;film&quot; tag=&quot;li&quot; active-class=&quot;eosqaqActive&quot;&gt;电影&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped&gt;</span><br><span class="line">eosqaqActive:&#123;</span><br><span class="line">color:red</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<p><strong>重定向</strong></p>
<p>redirect关键字。</p>
<p>index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">const routes=[</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/film&#x27;,</span><br><span class="line">component:Film</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/center&#x27;,</span><br><span class="line">component:Center</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/&#x27;,</span><br><span class="line">redirect:&#x27;/film&#x27;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;*&#x27;,//通配符，如果用户随便输入那么就可以用通配符对应，并且通配符的优先级是最低的</span><br><span class="line">redirect:&#x27;/film&#x27;</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>



<p><strong>嵌套路由</strong></p>
<p>在film里面留一个路由容器，这样子加载路由的时候会留下film除了路由容器以外的部分，只取代router-view的部分。</p>
<p>film.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;1234&lt;/div&gt;</span><br><span class="line">&lt;router-view&gt;&lt;/router-view&gt;</span><br></pre></td></tr></table></figure>

<p>index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">const routes=[</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/film&#x27;,</span><br><span class="line">component:Film,</span><br><span class="line">children:[</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;nowplaying&#x27;,//简写</span><br><span class="line">component:Nowplaying</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;film/comingsoon&#x27;,</span><br><span class="line">component:Comingsoon</span><br><span class="line">&#125;,</span><br><span class="line">path:&#x27;&#x27;,</span><br><span class="line">redirect:&#x27;/film/nowplaying&#x27;</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/center&#x27;,</span><br><span class="line">component:Center</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/&#x27;,</span><br><span class="line">redirect:&#x27;/film&#x27;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;*&#x27;,//通配符，如果用户随便输入那么就可以用通配符对应，并且通配符的优先级是最低的</span><br><span class="line">redirect:&#x27;/film&#x27;</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>



<p><strong>编程式导航</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">handleClick(id)&#123;</span><br><span class="line">//在main.js中初始化了router，所以this上又$router</span><br><span class="line">//编程时导航</span><br><span class="line">this.$router.push( `/detail/$&#123;id&#125;`)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>动态路由</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const routes=[</span><br><span class="line">&#123;</span><br><span class="line">path:&#x27;/detail/:myid&#x27;,</span><br><span class="line">component:Detail</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>detail.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mounted()&#123;</span><br><span class="line">//console.log(location.hash)</span><br><span class="line">//this.$route只是当前匹配的路由信息</span><br><span class="line">console.log(this.$route.params.myid)</span><br><span class="line">//利用合适的后端接口，使用myid把数据请求回来</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>命名路由</strong></p>
<p>路由名字</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">handleClick(id)&#123;</span><br><span class="line">this.$router.push(&#123;</span><br><span class="line">name:&#x27;eosqaqdetail&#x27;,</span><br><span class="line">params:&#123;</span><br><span class="line">myid:id</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">path:&#x27;/detail/:myid&#x27;,</span><br><span class="line">component:Detail,</span><br><span class="line">name:&#x27;eosqaqdetail&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>query传参</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">handleClick(id)&#123;</span><br><span class="line">this.$router.push(`/detail?id=$&#123;id&#125;`)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>detail.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mounted()&#123;</span><br><span class="line">console.log(this.$route.query.id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/06/25/vue-router/" data-id="cl4twte5f0002ywfo0dm7h0iq" data-title="vue-router" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/07/04/nginx%E6%9C%8D%E5%8A%A1%E5%99%A8/">nginx服务器</a>
          </li>
        
          <li>
            <a href="/2022/07/04/git/">git</a>
          </li>
        
          <li>
            <a href="/2022/07/02/%E9%A1%B9%E7%9B%AE%E5%A4%8D%E7%9B%98/">项目复盘</a>
          </li>
        
          <li>
            <a href="/2022/07/02/Vuex/">Vuex</a>
          </li>
        
          <li>
            <a href="/2022/06/26/%E8%BD%AE%E6%92%AD%E7%BB%84%E4%BB%B6/">轮播组件</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>